import{r as d,i as m,j as e,c as b,F as g,H as v}from"./index-C93csvrG.js";function f(){const[a,s]=d.useState({state:"all",district:"",category:"all",status:"all"}),[w,o]=d.useState({total:0,highPriority:0,mediumPriority:0,lowPriority:0}),[r,c]=d.useState(!1),n=[{value:"all",label:"All States"},{value:"Andhra Pradesh",label:"Andhra Pradesh"},{value:"Delhi",label:"Delhi"},{value:"Karnataka",label:"Karnataka"},{value:"Maharashtra",label:"Maharashtra"},{value:"Tamil Nadu",label:"Tamil Nadu"},{value:"Uttar Pradesh",label:"Uttar Pradesh"},{value:"West Bengal",label:"West Bengal"}],h=[{value:"all",label:"All Categories"},{value:"pothole",label:"Pothole"},{value:"streetlight",label:"Street Light"},{value:"garbage",label:"Garbage"},{value:"water",label:"Water"},{value:"traffic",label:"Traffic"},{value:"noise",label:"Noise"},{value:"safety",label:"Safety"},{value:"other",label:"Other"}],x=[{value:"all",label:"All Status"},{value:"reported",label:"Reported"},{value:"acknowledged",label:"Acknowledged"},{value:"in-progress",label:"In Progress"},{value:"resolved",label:"Resolved"}];d.useEffect(()=>{u()},[a]);const u=async()=>{try{const t={...a.state!=="all"&&{state:a.state},...a.district&&{district:a.district},...a.category!=="all"&&{category:a.category},...a.status!=="all"&&{status:a.status}},i=(await m.getAllIssues(t))?.data?.issues||[];o({total:i.length,highPriority:i.filter(l=>l.priority==="high").length,mediumPriority:i.filter(l=>l.priority==="medium").length,lowPriority:i.filter(l=>l.priority==="low").length})}catch(t){console.error("Failed to fetch stats:",t)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Community Heatmap"}),e.jsx("p",{className:"text-sm text-white/60",children:"Visualize issue distribution across districts"})]}),e.jsxs("div",{className:"rounded-xl border border-white/10 bg-white/5 p-4",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-semibold text-white",children:"Filters"}),e.jsxs("button",{onClick:()=>c(!r),className:b("flex items-center gap-2 rounded-lg px-3 py-1 text-sm transition-colors",r?"bg-rose-500/20 text-rose-400":"bg-white/5 text-white/60"),children:[e.jsx(g,{className:"h-4 w-4"}),r?"Hide":"Show"]})]}),r&&e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-xs text-white/60",children:"State"}),e.jsx("select",{value:a.state,onChange:t=>s({...a,state:t.target.value,district:""}),className:"w-full rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-sm text-white",children:n.map(t=>e.jsx("option",{value:t.value,className:"bg-black",children:t.label},t.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-xs text-white/60",children:"District"}),e.jsx("input",{type:"text",value:a.district,onChange:t=>s({...a,district:t.target.value}),placeholder:"Enter district name",className:"w-full rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-sm text-white placeholder-white/40"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-xs text-white/60",children:"Category"}),e.jsx("select",{value:a.category,onChange:t=>s({...a,category:t.target.value}),className:"w-full rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-sm text-white",children:h.map(t=>e.jsx("option",{value:t.value,className:"bg-black",children:t.label},t.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-xs text-white/60",children:"Status"}),e.jsx("select",{value:a.status,onChange:t=>s({...a,status:t.target.value}),className:"w-full rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-sm text-white",children:x.map(t=>e.jsx("option",{value:t.value,className:"bg-black",children:t.label},t.value))})]})]})]}),e.jsxs("div",{className:"rounded-xl border border-white/10 bg-white/5 p-6",children:[e.jsx("h3",{className:"mb-4 text-lg font-semibold text-white",children:"Issue Distribution Heatmap"}),e.jsx("div",{className:"relative h-[600px] overflow-hidden rounded-lg border border-white/10",children:e.jsx(v,{userRole:"community",defaultCenter:[28.6139,77.209],defaultZoom:11,height:"600px",filters:a})})]}),e.jsxs("div",{className:"rounded-xl border border-white/10 bg-white/5 p-6",children:[e.jsx("h4",{className:"mb-3 text-sm font-semibold text-white",children:"Heatmap Legend"}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-4 w-4 rounded-full bg-emerald-500"}),e.jsx("span",{className:"text-sm text-white/60",children:"Low Density"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-4 w-4 rounded-full bg-amber-500"}),e.jsx("span",{className:"text-sm text-white/60",children:"Medium Density"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-4 w-4 rounded-full bg-rose-500"}),e.jsx("span",{className:"text-sm text-white/60",children:"High Density"})]})]})]})]})}export{f as CommunityHeatmap,f as default};
